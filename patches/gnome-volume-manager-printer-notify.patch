diff -ur /usr/src/packages/BUILD/gnome-volume-manager-2.17.0/src/manager.c ./src/manager.c
--- /usr/src/packages/BUILD/gnome-volume-manager-2.17.0/src/manager.c	2007-07-25 14:41:52.000000000 -0400
+++ ./src/manager.c	2007-07-25 14:41:50.000000000 -0400
@@ -22,6 +22,7 @@
 #include <stdio.h>
 #include <sys/types.h>
 #include <sys/stat.h>
+#include <sys/wait.h>
 #include <dirent.h>
 #include <signal.h>
 #include <unistd.h>
@@ -58,6 +59,7 @@
 #define warn(fmt,arg...) g_warning("%s/%d: " fmt,__FILE__,__LINE__,##arg)
 
 #define NAUTILUS_COMMAND BIN_NAUTILUS " -n --no-desktop %m"
+#define CUPS_AUTOCONFIG_BIN "/usr/lib/cups-autoconfig/cups-autoconfig"
 
 static struct gvm_configuration config;
 static DBusConnection *dbus_connection;
@@ -2523,9 +2525,21 @@
 static gboolean
 printer_device_added (const char *udi, const char *capability __attribute__((__unused__)))
 {
-	if (config.autoprinter)
-		gvm_run_printer (udi);
-	
+	if (!config.autoprinter)
+        return TRUE;
+
+    /* If cups-autoconfig is enabled then we let it setup new printers. */
+    if (g_file_test (CUPS_AUTOCONFIG_BIN, G_FILE_TEST_IS_EXECUTABLE)) {
+        int ret;
+
+        g_spawn_command_line_sync (CUPS_AUTOCONFIG_BIN " --is-add-enabled",
+                                   NULL, NULL, &ret, NULL);
+        
+        if (WEXITSTATUS(ret) == 0)
+            return TRUE;
+    }
+
+	gvm_run_printer (udi);
 	return TRUE;
 }
 
@@ -2811,6 +2825,23 @@
 	return TRUE;
 }
 
+#if ENABLE_NOTIFY
+static void
+show_printer_notification (const char *title, const char *message)
+{
+    NotifyNotification *n;
+    n = notify_notification_new (title, message, "gnome-dev-printer", NULL);
+    notify_notification_show (n, NULL);
+	g_object_unref (n);
+}
+#endif
+
+static void
+printer_needs_configuration (const char *udi)
+{
+    gvm_run_printer (udi);
+}
+
 static DBusHandlerResult
 gvm_dbus_filter_function (DBusConnection *connection, DBusMessage *message, void *user_data)
 {
@@ -2825,7 +2856,30 @@
 		g_timeout_add (3000, reinit_dbus, NULL);
 		
 		return DBUS_HANDLER_RESULT_HANDLED;
-	}
+#if ENABLE_NOTIFY
+	} else if (dbus_message_is_signal (message, "org.cups.CupsAutoconfig", "PrinterInfo")) {
+        DBusMessageIter iter;
+        char *title;
+        char *msg;
+
+        dbus_message_iter_init (message, &iter);
+        dbus_message_iter_get_basic (&iter, &title);
+        dbus_message_iter_next (&iter);
+        dbus_message_iter_get_basic (&iter, &msg);
+        
+        show_printer_notification (title, msg);
+		return DBUS_HANDLER_RESULT_HANDLED;
+#endif
+    } else if (dbus_message_is_signal (message, "org.cups.CupsAutoconfig", "PrinterConfigRequired")) {
+        DBusMessageIter iter;
+        char *udi;
+        
+        dbus_message_iter_init (message, &iter);
+        dbus_message_iter_get_basic (&iter, &udi);
+
+        printer_needs_configuration (udi);
+		return DBUS_HANDLER_RESULT_HANDLED;
+    }
 	
 	return DBUS_HANDLER_RESULT_NOT_YET_HANDLED;
 }
@@ -2848,6 +2902,13 @@
 	dbus_connection_setup_with_g_main (dbus_connection, NULL);
 	dbus_connection_set_exit_on_disconnect (dbus_connection, FALSE);
 	
+    dbus_bus_add_match (dbus_connection, "type=signal,interface=org.cups.CupsAutoconfig", &error);
+    if (dbus_error_is_set (&error)) {
+		dbg ("failed to add match rule: %s\n", error.message);
+		dbus_error_free (&error);
+		return FALSE;
+    }
+
 	dbus_connection_add_filter (dbus_connection, gvm_dbus_filter_function, NULL, NULL);
 	
 	return TRUE;
